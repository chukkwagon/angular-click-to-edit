!function(){"use strict";function e(e){return{require:["^clickToEdit","ngModel"],restrict:"A",priority:1001,link:function(n,t,i,a){function o(){t.bind("focus",d.enableEditor),t.bind("blur",d.disableEditor),t.bind("keypress",function(e){13==e.which&&d.save(e)})}function c(){t.bind("focus",d.enableEditor),t.bind("blur",d.disableEditor)}function r(){t.bind("change",d.save)}var d=a[0],s=a[1];d.setNgModel(s);var l=e(i.ngModel),u=l.assign;d.modelSetter(function(e){u(n,e)});var f=t[0],p={text:o,radio:r,checkbox:r,number:r,"select-one":r,tel:o,email:o,textarea:c};p[f.type]?p[f.type]():r()}}}function n(e,n){return{transclude:!0,restrict:"E",scope:{onSave:"&"},template:'<div class="inline-editor"><span ng-transclude></span><div class="editor-actions"><span ng-show="editor.enabled"><span ng-mousedown="cancel($event)"><i class="fa fa-times-circle"></i></span><span ng-mousedown="save($event)"><i class="fa fa-check-circle"></i></span></span></div></div>',controller:["$scope",function(t){function i(e){e&&(e.preventDefault(),e.target.parentNode.parentNode.children[0].children[0].blur()),c(o),t.editor.enabled=!1}var a,o,c;return this.setNgModel=function(e){a=e,n(function(){o=a.$modelValue})},this.enableEditor=function(){t.$apply(function(){t.editor.enabled=!0})},this.disableEditor=function(){t.editor.enabled=!1,c(o)},this.modelSetter=function(e){c=e},t.disabled=!1,t.editor={enabled:!1},t.cancel=function(e){var a="$apply"===t.$root.$$state||"$digest"===t.$root.$$state;a?n(function(){i(e)}):i(e)},this.save=t.save=function(n){n&&n.preventDefault(),t.disabled=!0;var i=a.$modelValue,c={currentValue:i,initialValue:o},r=t.onSave(c);r&&r.$promise&&(r=r.$promise),e.when(r).then(function(e){e&&(t.disabled=!1,o=i,t.cancel(n))})},this}]}}angular.module("clickToEditDirective",[]).directive("editInput",e).directive("clickToEdit",n),e.$inject=["$parse"],n.$inject=["$q","$timeout"]}();